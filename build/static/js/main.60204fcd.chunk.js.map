{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonForm.js","services/phoneService.js","components/NotificationMessage.js","App.js","index.js"],"names":["Filter","type","value","eventHandler","onChange","Persons","searchedPersons","searchTerm","deleteHandler","regex","RegExp","filter","person","test","name","map","number","onClick","event","id","PersonForm","submitEventHandler","nameEventHandler","numberEventHandler","onSubmit","baseUrl","phoneService","getAll","axios","get","then","response","data","create","newObject","post","update","put","console","log","remove","objectToBeDeleted","window","confirm","delete","NotificationMessage","message","className","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newSearchTerm","setNewSearchTerm","notificationMessage","setNotificationMessage","notificationType","setNotificationType","useEffect","allContacts","target","preventDefault","nameObject","firstElementIndex","findIndex","element","updatedContact","setTimeout","catch","error","newContact","concat","request","undefined","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.60204fcd.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({type, value, eventHandler}) => {\r\n    return (\r\n      <div>\r\n        filter shown with <input type={type} value={value} onChange={eventHandler} />\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Persons = ({searchedPersons, searchTerm, deleteHandler}) => {\r\n    const regex = new RegExp(searchTerm, 'i')\r\n    return (\r\n        <div>\r\n            {searchedPersons\r\n                .filter(person => {\r\n                    if (searchTerm === '') {\r\n                        return person;\r\n                    } else if (regex.test(person.name) === true) {\r\n                        return person\r\n                    } else{\r\n                        return null\r\n                    }\r\n                })\r\n                .map(person => \r\n                    <div key={person.id}>\r\n                        {person.name} {person.number}\r\n                        <button onClick={(event)=>deleteHandler(event, person)}>delete</button>\r\n                    </div>)\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = ({submitEventHandler, name, number, nameEventHandler, numberEventHandler}) => {\r\n    return (\r\n      <form onSubmit={submitEventHandler}>\r\n          <div>\r\n            name: <input value={name} onChange={nameEventHandler} />\r\n          </div>\r\n          <div>\r\n            number: <input value={number} onChange={numberEventHandler} />\r\n          </div>\r\n          <div>\r\n            <button type=\"submit\">add</button>\r\n          </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => {\r\n        console.log(response.data)\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst remove = (objectToBeDeleted) => {\r\n    if (window.confirm(`Delete ${objectToBeDeleted.name} ?`) === true) {\r\n        const request = axios.delete(`${baseUrl}/${objectToBeDeleted.id}`)\r\n        return request.then(response => {\r\n            return response.data\r\n        })\r\n    }\r\n}\r\n\r\nconst phoneService = { getAll, create, update, remove }\r\nexport default phoneService\r\n","import React from 'react'\r\n\r\nconst NotificationMessage = ({message, type}) => {\r\n    if (message == null) {\r\n        return null\r\n    }\r\n\r\n    if (type === 'notification') {\r\n        return (\r\n            <div className=\"notification\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n    else if (type === 'error') {\r\n        return (\r\n            <div className=\"error\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n    else {\r\n        return null\r\n    }\r\n}\r\n\r\nexport default NotificationMessage","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport phoneService from './services/phoneService'\nimport NotificationMessage from './components/NotificationMessage'\n\nconst App = () => {\n  \n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearchTerm, setNewSearchTerm ] = useState('')\n  const [ notificationMessage, setNotificationMessage ] = useState(null)\n  const [ notificationType, setNotificationType ] = useState('')\n\n  // useEffect for mocking the fetching of data from json-server\n  useEffect(() => {\n    phoneService\n      .getAll()\n      .then(allContacts => {\n        setPersons(allContacts)  \n      })\n  }, [])\n\n  const addContact = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const firstElementIndex = persons.findIndex( element => element.name === newName )\n\n    if (firstElementIndex !== -1) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        phoneService\n          .update(persons[firstElementIndex].id, nameObject)\n          .then(updatedContact => {\n            setPersons(persons.map(person => person.id !== persons[firstElementIndex].id ? person : updatedContact))\n            \n            setNotificationMessage(\n              `Changed ${nameObject.name}'s number`\n            )\n            setNotificationType('notification')  \n            setTimeout(() => {\n              setNotificationMessage(null)\n              setNotificationType('')\n            }, 5000) \n          \n          })\n          .catch(error => {\n            setNotificationMessage(\n              `${error.response.data.error}`\n            )\n            setNotificationType('error')\n            setTimeout(() => {\n              setNotificationMessage(null)\n              setNotificationType('')\n            }, 5000)\n            setPersons(persons.filter(person => person.id !== persons[firstElementIndex].id))\n          })\n      }\n    }\n    else {\n      phoneService\n        .create(nameObject)\n        .then(newContact => {\n          setPersons(persons.concat(newContact))\n          setNotificationMessage(\n            `Added ${nameObject.name}`\n          )\n          setNotificationType('notification')\n          setTimeout(() => {\n            setNotificationMessage(null)\n            setNotificationType('')\n          }, 5000)  \n        })\n\t      .catch(error => {\n          console.log(error.response.data.error)\n\t        setNotificationMessage(\n            `${error.response.data.error}`\n          )\n          setNotificationType('error')\n          setTimeout(() => {\n            setNotificationMessage(null)\n            setNotificationType('')\n          }, 5000)\n\t      })\n        \n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchTermChange = (event) => {\n    setNewSearchTerm(event.target.value)\n  }\n\n  const deleteContact = (event, objectToBeDeleted) => {\n    event.preventDefault()\n    const request = phoneService.remove(objectToBeDeleted)\n    \n    if (request !== undefined) {\n      request.then(() => {\n        setPersons(persons.filter(person => person.id !== objectToBeDeleted.id))\n      })\n      setNotificationMessage(\n        `Removed ${objectToBeDeleted.name}`\n      )\n      setNotificationType('notification')\n      setTimeout(() => {\n        setNotificationMessage(null)\n        setNotificationType('')\n      }, 5000)\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <NotificationMessage message={notificationMessage} type={notificationType} />\n      <Filter type={'text'} value={newSearchTerm} eventHandler={handleSearchTermChange} />\n      <h2>add a new</h2>\n      <PersonForm submitEventHandler={addContact} name={newName} number={newNumber} nameEventHandler={handleNameChange} numberEventHandler={handleNumberChange} />\n      <h2>Numbers</h2>\n      <Persons searchedPersons={persons} searchTerm={newSearchTerm} deleteHandler={deleteContact} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}